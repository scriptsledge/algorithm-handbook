---
title: 781. Rabbits in Forest
tags:
  - Array
  - Hash Table
  - Math
  - Greedy
  - Medium
---

# 781. Rabbits in Forest

<div class="grid cards" markdown>

-   :material-youtube: **Watch the Solution**
    [Watch Video](https://youtube.com/shorts/jQ0bGl53uM4){ .md-button }

-   :material-github: **View on GitHub**
    [Source Code](https://github.com/scriptsledge/algorithm-handbook/tree/main/src/0781){ .md-button }

-   :simple-leetcode: **LeetCode Solution**
    [Read Post](https://leetcode.com/problems/rabbits-in-forest/solutions/){ .md-button }

</div>

## üìù Problem Description

!!! info "Problem Statement"
    There is a forest with an unknown number of rabbits. We asked `n` rabbits "How many rabbits have the same color as you?" and collected the answers in an integer array `answers` where `answers[i]` is the answer of the `i`-th rabbit.

    Given the array `answers`, return the minimum number of rabbits that could be in the forest.

### Examples

**Example 1:**
```text
Input: answers = [1,1,2]
Output: 5
Explanation:
The two rabbits that answered "1" could both be the same color, say red.
The rabbit that answered "2" can't be red or the answers would be inconsistent.
Say the rabbit that answered "2" was blue.
Then there should be 2 other blue rabbits in the forest that didn't answer into the array.
The smallest possible number of rabbits in the forest is therefore 5: 3 that answered plus 2 that didn't.
```

**Example 2:**
```text
Input: answers = [10,10,10]
Output: 11
```

### Constraints
*   `1 <= answers.length <= 1000`
*   `0 <= answers[i] < 1000`

## üß† Intuition

If a rabbit says there are $y$ other rabbits of the same color, that means there are $y+1$ rabbits of that color in total. To minimize the number of rabbits, we should try to "group" as many rabbits as possible into the same color. 

If multiple rabbits give the same answer $y$, they *could* be the same color, but only up to $y+1$ rabbits can share that color. If more than $y+1$ rabbits say $y$, we need another group (another color) of $y+1$ rabbits.

## üí° Approach

1.  Use a frequency map to count how many rabbits gave each answer $y$. Let this count be $x$.
2.  For a given answer $y$, each group of rabbits of that color can have at most $y+1$ members.
3.  The number of groups (colors) needed for answer $y$ is $\lceil x / (y+1) \rceil$.
4.  Each of these groups contributes $y+1$ rabbits to the total count.
5.  Formula for total rabbits for answer $y$: $\lceil x / (y+1) \rceil 	imes (y+1)$.
6.  In integer math: `((x + y) / (y + 1)) * (y + 1)`.

## üíª Code

=== "C++"

    ```cpp
    --8<-- "src/0781/solution.cpp"
    ```

## üìä Complexity Analysis

*   **Time Complexity:** $O(N)$
    *   We iterate through the `answers` array once to build the frequency map ($O(N)$).
    *   We then iterate through the map, which has at most $N$ entries ($O(N)$).

*   **Space Complexity:** $O(N)$
    *   The frequency map can store up to $N$ unique answers in the worst case.