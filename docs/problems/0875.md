---
title: 875. Koko Eating Bananas
tags:
  - Array
  - Binary Search
  - Medium
---

# 875. Koko Eating Bananas

<div class="grid cards" markdown>

-   :material-youtube: **Watch the Solution**
    [Watch Video](https://youtube.com/shorts/LPvoHA3PAFA){ .md-button }

-   :material-github: **View on GitHub**
    [Source Code](https://github.com/scriptsledge/algorithm-handbook/tree/main/src/0875){ .md-button }

-   :simple-leetcode: **LeetCode Solution**
    [Read Post](https://leetcode.com/problems/koko-eating-bananas/solutions/7511694/on-log-m-binary-search-answer-space-over-8mjg){ .md-button }

</div>

## üìù Problem Description

!!! info "Problem Statement"
    Koko loves to eat bananas. There are `n` piles of bananas, the `i`-th pile has `piles[i]` bananas. The guards have gone and will come back in `h` hours.

    Koko can decide her bananas-per-hour eating speed of `k`. Each hour, she chooses some pile of bananas and eats `k` bananas from that pile. If the pile has less than `k` bananas, she eats all of them instead and will not eat any more bananas during this hour.

    Koko likes to eat slowly but still wants to finish eating all the bananas before the guards return.

    Return the minimum integer `k` such that she can eat all the bananas within `h` hours.

### Examples

**Example 1:**
```text
Input: piles = [3,6,7,11], h = 8
Output: 4
```

**Example 2:**
```text
Input: piles = [30,11,23,4,20], h = 5
Output: 30
```

**Example 3:**
```text
Input: piles = [30,11,23,4,20], h = 6
Output: 23
```

### Constraints
*   `1 <= piles.length <= 10^4`
*   `piles.length <= h <= 10^9`
*   `1 <= piles[i] <= 10^9`

## üß† Intuition

This is a classic "Binary Search on Answer" problem. We are looking for a threshold value $k$.
- If $k$ is very large, the time taken is small (Koko finishes quickly).
- If $k$ is very small, the time taken is large (Koko might not finish in time).

The relationship between speed and time is monotonic: increasing speed never increases the time taken. This monotonicity allows us to use binary search to find the minimum speed $k$ that satisfies the condition $	ext{total_hours}(k) 
le h$.

## üí° Approach

1.  **Define the Search Space:**
    *   Minimum speed `low = 1` (must eat at least one banana per hour).
    *   Maximum speed `high = max(piles)` (eating faster than the largest pile doesn't help because she only eats from one pile per hour).
2.  **Binary Search:**
    *   While `low <= high`:
        *   Calculate `mid` speed.
        *   Calculate the total time required at `mid` speed. For each pile, the time taken is $\lceil \text{pile} / \text{mid} \rceil$, which can be calculated as `(pile + mid - 1) / mid`.
        *   **Important:** Use `long long` for the total time to avoid overflow, as `h` can be up to $10^9$.
        *   If `total_time <= h`: Speed `mid` is possible. Try to see if a smaller speed is also possible. `high = mid - 1`.
        *   Else: Speed `mid` is too slow. Increase the minimum speed. `low = mid + 1`.
3.  **Result:** The variable `low` will hold the minimum speed required.

## üíª Code

=== "C++"

    ```cpp
    --<8<-- "src/0875/solution.cpp"
    ```

## üìä Complexity Analysis

*   **Time Complexity:** $O(N \log M)$
    *   $N$ is the number of piles (we iterate through them for each check).
    *   $M$ is the maximum value in `piles` (the search space size).
    *   Binary search takes $\log M$ steps, and each check takes $O(N)$ time.

*   **Space Complexity:** $O(1)$
    *   We only use a few extra variables for pointers and time calculation.